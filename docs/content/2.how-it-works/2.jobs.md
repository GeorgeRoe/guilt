---
title: Jobs
description: Understanding how GUILT tracks and manages your submitted jobs
navigation:
  icon: i-lucide-list-todo
---

GUILT works by tracking jobs that you submit to the SLURM scheduler on your HPC system.
It records details about your jobs in proprietary files stored in the `~/.guilt/` directory.

First, you will understand what data these jobs contain and then learn how GUILT processes them.

## Structure

### Unprocessed Jobs

Each unprocessed job has the following fields:

::field-group
::field{name="job_id" type="string" required}
The unique identifier assigned to your job by SLURM.
::

::field{name="cpu_profile_resolution_data" type="ADT" required}
The data used to deduce the CPU profile for the job, which can be one of two values:

```json [Unprocessed Job with CPU profile name provided on job submission]
{
  "cpu_profile_resolution_data": { "Name": "Some CPU Name" }
}
```

```json [Unprocessed Job with no CPU profile name provided on job submission]
{
  "cpu_profile_resolution_data": "None"
}
```
::
::

### Processed Jobs

Each **Processed Job** contains all the fields of an **Unprocessed Job**, plus the additional fields listed below:

::field-group
::field{name="job_id" type="string" required}
The unique identifier assigned to your job by SLURM.
::

::field{name="cpu_profile_name" type="string" required}
The name of the CPU profile used for the job.
::

::field{name="start_time" type="datetime string" required}
The timestamp when the job started. (e.g., `"2025-01-01T12:00:00Z"`)
::

::field{name="end_time" type="datetime string" required}
The timestamp when the job ended. (e.g., `"2025-01-02T12:00:00Z"`)
::

::field{name="energy" type="float" required}
The estimated energy consumption of the job in kilowatt-hours (kWh).
::

::field{name="emissions" type="float" required}
The estimated carbon emissions of the job in grams of CO2 equivalent (gCO2e).
::

::field{name="generation_mix" type="Map<string, float>" required}
A map of energy sources names and their respective proportion of the total energy generation used during the job's execution in percentages. (e.g., `{ "solar": 100.0 }` means "100% of the energy was generated using solar")
::
::

## Job Lifecycle 

When you submit a job using `guilt batch`, GUILT records various details about the job:

- **Job ID**: The unique identifier assigned to your job by SLURM.
- **CPU Profile**: The CPU profile used for the job, which determines how GUILT estimates energy consumption.

At this stage your job is an **Unprocessed Job**. It remains like this util you run the `guilt process` command, which processes all unprocessed jobs.

A **Processed Job** has additional information calculated, such as estimated energy consumption and carbon emissions.

To convert an unprocessed job to a processed job, GUILT uses the CPU profile associated with the job to estimate energy consumption based on the job's resource usage.

$$
\text{TDP per core} = \frac{TDP}{\text{Number of Cores}}
$$

$$
\text{Energy (kWh)} = \frac{\text{TDP per core} \times \text{Cores Used} \times \text{Duration (hours)}}{1000}
$$

$$
\text{Emissions (gCO2e)} = \text{Energy (kWh)} \times \text{Carbon Intensity (gCO2e/kWh)}
$$

The variables used in these equations and their sources are as follows:

| Variable | Source | Description |
|---|---|---|
| $\text{TDP}$ | CPU Profile | Thermal Design Power of the CPU in watts. |
| $\text{Number of Cores}$ | CPU Profile | Total number of CPU cores. |
| $\text{Cores Used}$ | SLURM Accounting | Number of CPU cores allocated to the job. |
| $\text{Duration (hours)}$ | SLURM Accounting | Total runtime of the job in hours. |
| $\text{Carbon Intensity (gCO2e/kWh)}$ | [Carbon Intensity API](https://carbonintensity.org.uk/) | Average carbon intensity of the grid at your HPC's location throughout the jobs duration. |

After processing, the job is stored as a **Processed Job** with all the relevant details, allowing you to analyze the energy consumption and carbon emissions of your HPC workloads.
